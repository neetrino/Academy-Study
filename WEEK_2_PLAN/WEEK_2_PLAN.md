# Неделя 2: Архитектура и качество

**Срок:** день 6–10  
**Курс:** AI-Coding в Cursor (VibeCoding → Production)

> **Для студента:** [README_STUDENT.md](README_STUDENT.md) — путеводитель по Неделе 2 и порядок работы.

---

## Цель недели

AI должен жить в клетке. Архитектурные рамки, документация, security, тесты, code review.

---

## Общий чеклист Недели 2

- [ ] **День 6** — архитектурные рамки для AI
- [ ] **День 7** — документация и ADR
- [ ] **День 8** — security-минимум
- [ ] **День 9** — тестирование (AI пишет, вы думаете)
- [ ] **День 10** — code review с AI
- [ ] Все домашние задания выполнены

---

# День 6 — Архитектурные рамки для AI

## Цель

Ставить границы: папки, слои, зависимости, стиль. AI перестаёт пихать бизнес-логику в UI.

---

## Теория (изучить перед практикой)

| Тема | Суть |
|------|------|
| Архитектурный контракт | Модули, слои, запреты — документ для AI и команды |
| Запреты | Бизнес-логика не в UI, зависимости не нарушать |
| Папки и слои | Структура проекта, откуда кто импортирует |

---

## Практика — чеклист

- [ ] Описать структуру учебного проекта: папки, назначение
- [ ] Определить слои: UI, сервисы, данные, утилиты
- [ ] Записать **запреты**: что нельзя делать (логика в UI, импорты вверх и т.д.)
- [ ] Добавить в `.cursor/rules` ссылку на архитектурный контракт
- [ ] Проверить: дать AI задачу — он соблюдает границы

---

## Критерии проверки (день засчитан, если)

- [ ] AI **перестаёт пихать** бизнес-логику в UI
- [ ] Есть `docs/ARCHITECTURE.md` с модулями и запретами

---

## Домашнее задание (День 6)

- [ ] Создать `docs/ARCHITECTURE.md` — архитектурный контракт
- [ ] Включить: структура папок, слои, зависимости, запреты

---

# День 7 — Документация и ADR (решения не должны испаряться)

## Цель

Фиксировать решения, чтобы не спорить каждую неделю заново.

---

## Теория (изучить перед практикой)

| Тема | Суть |
|------|------|
| ADR | Architecture Decision Record — краткий документ о принятом решении |
| Структура ADR | Контекст → решение → последствия |
| Когда писать | Значимые решения: как храним env, как делаем auth, выбор библиотеки |

---

## Практика — чеклист

- [ ] Написать **2 ADR**:
  1. «Как храним env / секреты»
  2. «Как делаем auth / roles»
- [ ] Каждый ADR: контекст (1–2 абзаца), решение (1–2 абзаца), последствия
- [ ] Сохранить в `docs/adr/` (создать папку)
- [ ] Создать шаблон ADR для будущих решений

---

## Критерии проверки (день засчитан, если)

- [ ] ADR **короткий**, конкретный, с последствиями
- [ ] Есть шаблон `docs/ADR_TEMPLATE.md`

---

## Домашнее задание (День 7)

- [ ] Создать `docs/ADR_TEMPLATE.md` — шаблон ADR
- [ ] Сохранить 2 ADR в `docs/adr/` (или `docs/` — по договорённости)

---

# День 8 — Security-минимум: что проверять всегда

## Цель

Не выпускать уязвимости «потому что стажёр».

---

## Теория (изучить перед практикой)

| Тема | Суть |
|------|------|
| Ввод и валидация | Все входные данные проверяем, санитизируем |
| Секреты | Никогда в коде/репо: env, .env в .gitignore |
| Доступы | Auth, авторизация, роли — кто что видит |
| Зависимости | npm audit, известные уязвимости |
| Rate limit | Защита API от злоупотреблений |

---

## Практика — чеклист

- [ ] Пройти по проекту с чек-листом security
- [ ] Найти **5 проблем** (реальных или в «дырявом» тестовом коде)
- [ ] Зафиксировать: что нашёл, как исправить
- [ ] Создать `docs/SECURITY_CHECKLIST.md` — чек-лист для PR

---

## Критерии проверки (день засчитан, если)

- [ ] Стажёр **находит** минимум 5 проблем
- [ ] Есть `docs/SECURITY_CHECKLIST.md`

---

## Домашнее задание (День 8)

- [ ] Создать `docs/SECURITY_CHECKLIST.md`
- [ ] Добавить пункты: ввод, секреты, доступы, зависимости, rate limit

---

# День 9 — Тестирование: AI пишет тесты, вы думаете

## Цель

Научиться требовать тесты у AI корректно. Тесты не фейковые — ловят регресс.

---

## Теория (изучить перед практикой)

| Тема | Суть |
|------|------|
| Unit-тесты | Утилиты, чистые функции, сервисы — по спецификации |
| Интеграционные | API, сценарии — что проверяем |
| Плохие тесты | Фейковые (всегда зелёные), не ловят баги |
| Хорошие тесты | Реальные assertion, edge cases, регресс |

---

## Практика — чеклист

- [ ] **5 unit-тестов** на утилиты/сервисы
- [ ] **2 интеграционных сценария** на API (если есть)
- [ ] Проверить: тесты **реально ловят** регресс (сломать код — тест падает)
- [ ] Задокументировать: как просить AI тесты — гайд в `docs/`

---

## Критерии проверки (день засчитан, если)

- [ ] Тесты **не фейковые**, ловят регресс
- [ ] Есть «Гайд: как просить тесты у AI» в `docs/AI_TESTING_GUIDE.md`

---

## Домашнее задание (День 9)

- [ ] Создать `docs/AI_TESTING_GUIDE.md` — как просить тесты у AI
- [ ] Включить: структура промпта, примеры, анти-паттерны

---

# День 10 — Code Review с AI (AI как второй глаз, не как судья)

## Цель

Использовать AI для ревью, но **принимать решения самому**.

---

## Теория (изучить перед практикой)

| Тема | Суть |
|------|------|
| AI-ревью | AI предлагает замечания — человек фильтрует |
| Шум vs реальное | Не всё замечание AI — важно; отделять |
| Аргументация | Уметь принять или отклонить с обоснованием |

---

## Практика — чеклист

- [ ] Сделать AI-ревью PR (своего или чужого)
- [ ] Пройти по замечаниям: какие реальные, какие шум
- [ ] Принять/отклонить с обоснованием
- [ ] Создать шаблон для ревью: `docs/PR_REVIEW_TEMPLATE.md`

---

## Критерии проверки (день засчитан, если)

- [ ] Стажёр умеет **аргументированно** принять/отклонить замечание
- [ ] Есть `docs/PR_REVIEW_TEMPLATE.md`

---

## Домашнее задание (День 10)

- [ ] Создать `docs/PR_REVIEW_TEMPLATE.md` — чек-лист для ревью
- [ ] Включить: что проверять, как отделять шум от реального

---

# Итоговый чеклист для специалиста (Неделя 2)

## Архитектура

- [ ] `docs/ARCHITECTURE.md` создан
- [ ] AI соблюдает границы (не пихает логику в UI)

## ADR

- [ ] Шаблон `docs/ADR_TEMPLATE.md`
- [ ] 2 ADR: env, auth/roles (или аналог)

## Security

- [ ] `docs/SECURITY_CHECKLIST.md` создан
- [ ] Найдено минимум 5 проблем в коде

## Тесты

- [ ] 5 unit + 2 интеграционных (по возможности)
- [ ] `docs/AI_TESTING_GUIDE.md` — гайд по промптам для тестов

## Code Review

- [ ] `docs/PR_REVIEW_TEMPLATE.md` создан
- [ ] Умею отделять шум от реального

---

## Полезные ссылки

- [Terminal \| Cursor Agent](https://cursor.com/docs/agent/terminal)
- [Commands \| Cursor Docs](https://cursor.com/docs/context/commands)

---

*После выполнения всех пунктов Неделя 2 считается завершённой. Дальше — Неделя 3: производственный цикл.*
