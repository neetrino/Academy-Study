# Гайд: как просить тесты у AI

**Курс:** AI-Coding в Cursor  
**День 9:** Тестирование — AI пишет, вы думаете

---

## Структура промпта для тестов

```
## Контекст
- Файл/функция: @file
- Стек: [Jest, Vitest, pytest...]

## Цель
Написать unit-тесты для [функция/компонент/сервис].

## Что проверить
- [ ] [Сценарий 1: нормальный случай]
- [ ] [Сценарий 2: edge case]
- [ ] [Сценарий 3: ошибка/исключение]

## Ограничения
- Использовать [Jest/Vitest/...]
- Не мокать то, что можно проверить реально
- Тесты должны ловить регресс — сломать код = упасть тест
```

---

## Хорошие практики

| Практика | Зачем |
|----------|-------|
| Указывать конкретные сценарии | AI не додумывает, пишет по списку |
| Не мокать лишнее | Моки скрывают баги |
| Проверять регресс | Сломать код → тест падает |
| Edge cases | Пустые входы, null, граничные значения |

---

## Анти-паттерны (как НЕ просить)

| Плохо | Почему |
|-------|--------|
| «Напиши тесты» | AI пишет фейковые, все зелёные |
| «Покрой 100%» | Охват ради охвата, тесты бесполезные |
| Мокать всё | Тесты не ловят реальные баги |

---

## Примеры промптов

### Unit-тест утилиты

> Напиши unit-тесты для функции `formatDate` в @utils/date.ts.
> Проверь: обычная дата, пустая строка, невалидный формат.
> Используй Jest. Тесты должны упасть, если сломать логику.

### Unit-тест сервиса

> Напиши тесты для `UserService.getById` в @services/user.ts.
> Проверь: найден пользователь, не найден (404), ошибка сети.
> Мок только fetch/API, не сам сервис.

### Интеграционный тест API

> Напиши интеграционный тест для GET /api/users/:id.
> Сценарии: 200 OK, 404, неавторизован (401).

---

*Добавь свои примеры под стек проекта.*
